<!-- åœ¨é¡µé¢åŠ è½½æ—¶å°±è¿›å…¥åˆ°é»˜è®¤çš„æœ€æ–°çš„æ•°æ® -->
<!-- ä½¿ç”¨æŒ‰é”®åˆ·æ–°æ—¶åˆ™å†é‡æ–°åŠ è½½æ•°æ® -->

<template>
    <div style="padding: 20px;">
        
        <a-row>
            <a-col :span="6"></a-col>
            <a-col :span="6" >ä¸‹æ‹‰é€‰æ‹©é¢†åŸŸ<Selector :Options="FieldOption" :DefaultValue="FieldQuery" @selected_value="FieldSelected"></Selector></a-col>
            <a-col :span="6" >ä¸‹æ‹‰é€‰æ‹©æ—¶é—´<Selector :Options="TimeOption"  :DefaultValue="TimeQuery" @selected_value="TimeSelected"></Selector></a-col>
            <a-col :span="6"><a-button @click="Query">æ›´æ–°é€‰æ‹©</a-button></a-col>
        </a-row>
    </div>
    
   

    <div class="items_container">
        <a-card class="card" id="card_contain" style="width: auto;">
        <a-card-grid style="width: 33.33%; text-align: center" v-for="item in LevelInformation"  @click="goPage2(item)">
            <h2 title="å±‚æ¬¡åç§°">{{ item.title }}</h2>
            <p title="è¯¥å±‚æ¬¡åœ¨æœ¬å¹´åº¦çš„æŠ€æœ¯æ•°é‡">æ•°é‡:{{ item.num }}</p>
            <p title="æ—¶é—´">å¹´ä»½:{{ item.time }}</p>
        </a-card-grid>
        </a-card>
    </div>



    <!-- <div class="items_container">
        <a-card hoverable style="width: 480px">
            <template #cover>
              <img alt="example" src="https://os.alipayobjects.com/rmsportal/QBnOOoLaAfKPirc.png" />
            </template>
            <a-card-meta title="Europe Street beat">
              <template #description>www.instagram.com</template>
            </a-card-meta>
          </a-card>
    </div> -->

    <!-- <div class="test">
        <h2>æµ‹è¯•</h2>
        <a-button @click="AxiosTest">æµ‹è¯•axios</a-button>
        <a-button @click="TestObj">æµ‹è¯•ç›¸åº”å¼testObj</a-button>
        <a-button @click="TestFunction">æµ‹è¯•æ˜¯å¦å˜æ›´testObj</a-button>

        <a-button @click='TestJump(1)'>è·³è½¬æµ‹è¯•</a-button>
    </div> -->


    


</template>

<script setup>
import Selector from '../Components/Selector.vue';

import {ref,reactive,toRef } from 'vue';
import axios from 'axios';


// Axiosè¯·æ±‚
// åœ¨Page1ä¸­,åªæœ‰ä¸€ç±»å‘åç«¯è¯·æ±‚çš„æ•°æ®,æŒ‡å®šApi,å‘åç«¯å‘é€SendValueæ•°æ®,æ•°æ®ç±»å‹ä¸ºjsonobj
// éœ€è¦è¿”å›æ•°æ®æŒ‰ç…§
// ä¸‹é¢çš„å½¢å¼å·²ç»æµ‹è¯•æˆåŠŸ,å°±æ˜¯éœ€è¦æ”¹çš„æ˜¯,æŠŠæ•´ä¸ªæ¨¡å—åŒ–
function AxiosTest(Api,SendValue){
axios.post(Api,
    SendValue)
  .then(function (response) {

    console.log(response);
    console.log(response.data);
    LevelInformation.value=response.data;

  })
  .catch(function (error) {
    // console.log('error--------------');
    // console.log(error);
    alert("Error,è”ç³»ç®¡ç†å‘˜è§£å†³é—®é¢˜");
  })
  .then(function () {
  }); 
};

// ğŸ‘‡ç›¸å½“äºæ˜¯åœ¨åˆ›å»ºé¡µé¢åå°±ä»åå°è¯·æ±‚æ•°æ®
// const DefaultSendValue={'field':'Data Management','year':'2022'}; //åˆå§‹é»˜è®¤çš„è¯·æ±‚æ•°æ®
// const DefaultApi='';//åˆå§‹é»˜è®¤çš„Api
// AxiosTest(DefaultApi,DefaultSendValue);



// å®šä¹‰é¡µé¢æœ€é‡è¦çš„æ•°æ®é¡¹,ç”¨äºå±•ç¤º12ä¸ªå±‚æ¬¡çš„æ•°æ®
const LevelInformation=ref([
    {
        title:"æ•°æ®èµ„æºåŒ–ç”Ÿäº§",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡åŒ–å¼€å‘",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®ä»·å€¼åŒ–åˆ©ç”¨",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®ä»·å€¼å¢å¼º",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æœåŠ¡å¼€å‘ååŒ",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡é›†æˆ",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ½œåœ¨ä»·å€¼è®¤è¯",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"çº§è”é£é™©åº”å¯¹",
        num:"1",
        time:"2022",
        field:"Data Management",
    },
    {
        title:"æ•°æ®æœåŠ¡è´¨é‡ä¿éšœ",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"ä»·å€¼åˆ†é…èƒ½åŠ›å¢å¼º",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"ä»·å€¼å˜ç°ä¸ä¿æŠ¤",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡çš„æŒä¹…åŒ–ç»è¥",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
]

)


// ğŸ‘‡12ä¸ªå±‚æ¬¡çš„æ•°æ®,é”®å’Œå€¼éœ€è¦å’Œåç«¯ä¿®æ”¹
// æ•°æ®éœ€æ±‚æ˜¯åç§°ä¹Ÿéœ€è¦å®ƒçš„id
const testObj=ref([
    {
        title:"æ•°æ®èµ„æºåŒ–ç”Ÿäº§",
        num:"1",
        time:"2022",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡åŒ–å¼€å‘",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æ•°æ®ä»·å€¼åŒ–åˆ©ç”¨",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æ•°æ®ä»·å€¼å¢å¼º",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æœåŠ¡å¼€å‘ååŒ",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡é›†æˆ",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æ½œåœ¨ä»·å€¼è®¤è¯",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"çº§è”é£é™©åº”å¯¹",
        num:"1",
        time:"2020",
        field:"Data Management",
    },
    {
        title:"æ•°æ®æœåŠ¡è´¨é‡ä¿éšœ",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"ä»·å€¼åˆ†é…èƒ½åŠ›å¢å¼º",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"ä»·å€¼å˜ç°ä¸ä¿æŠ¤",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
    {
        title:"æ•°æ®æœåŠ¡çš„æŒä¹…åŒ–ç»è¥",
        num:"1",
        time:"2020",
        field:"Data Management",

    },
]);


// ä¸‹æ‹‰æ¡†å†…å®¹
// ğŸ‘‡æ³¨æ„,åœ¨å®é™…ä¸Šé¢†åŸŸå’Œæ—¶é—´ä¹Ÿæ˜¯éœ€è¦è¯·æ±‚çš„,ç›®å‰é˜¶æ®µä¸è¯·æ±‚ç½¢äº†
const TimeOption=reactive([{value:2022,label:2022},{value:2021,label:2021},{value:2020,label:2020},{value:2019,label:2019},{value:2018,label:2018},{value:2017,label:2017}]);
const FieldOption=reactive([{value:'Data Management',label:'Data Management'},{value:'Data Security',label:'Data Security'}]);

// ä¸‹æ‹‰æ¡†æ¥å—å˜é‡å˜åŒ–
// ğŸ‘‡ä¸‹é¢è¿™ä¸¤è¡Œè¿˜å¯ä»¥ä¼˜åŒ–,æ„Ÿè§‰è¿è¡Œå¯èƒ½ä¼šæœ‰bug
// ç”¨äºæ¥æ”¶å­ç»„ä»¶ä¿®æ”¹åçš„æ•°æ®,ä¾¿äºåç»­è¿›è¡ŒæŸ¥è¯¢æ—¶ä½¿ç”¨æ•°æ®
const TimeQuery=ref('2022');
const FieldQuery=ref('Data Management');

function TimeSelected(TimeFromChildSelector){
    
    console.log("from child:",TimeFromChildSelector);
    TimeQuery.value=TimeFromChildSelector;
    console.log('TimeQuery.value change time:',TimeQuery.value);
};

function FieldSelected(FieldFromChildSelector){
    console.log("from child:",FieldFromChildSelector);
    FieldQuery.value=FieldFromChildSelector;
    console.log('FieldQuery.value changed field:',FieldQuery.value);
}

// ğŸ‘‡å­˜åœ¨å†™æ­»çš„æ•°æ®ç”¨äºæ›´æ–°è¯·æ±‚
function Query(){
    console.log('reset attr');
    console.log('changed field:',FieldQuery.value);
    console.log('change time:',TimeQuery.value);

    // const SendValue={'field':FieldQuery.value,'year':TimeQuery.value};
    // ğŸ‘‡å†™æ­»çš„æ•°æ®
    const SendValue={'field':FieldQuery.value,'year':TimeQuery.value};
    const Api='http://123.60.31.63:8001/classfication_count';
    AxiosTest(Api,SendValue);

};
Query();




// é¡µé¢è·³è½¬è‡³page2
import { useRouter, useRoute } from 'vue-router';
const router=useRouter();

// ğŸ‘‡ç‰¹åˆ«æ³¨æ„ï¼šå‘½åè·¯ç”±è¿™ç§æ–¹å¼ä¼ é€’çš„å‚æ•°ï¼Œå¦‚æœåœ¨ç›®æ ‡é¡µé¢åˆ·æ–°æ˜¯ä¼šå‡ºé”™çš„
// å› æ­¤è¿˜æ˜¯è€è€å®å®ä½¿ç”¨query
// ä¸èƒ½ç›´æ¥ä¼ é€’å¯¹è±¡,å¦‚æœä¸€å®šè¦ä½¿ç”¨å¯¹è±¡å°±è¦stringtifyä¼ è¿›å»
function goPage2(value){
    console.log(value);
    const PassValue=value;
    console.log(PassValue);
    router.push({ path: '/page2', query: {PassValue: JSON.stringify(PassValue),TestNum:1}});
};















</script>










<style>
div.items_container{
    /* width: 220px; */
    padding: 20px;
    border: 1px solid gray;
    margin: 10; 
    background-color: #dddddd;
};
div.item{
    margin: 0; 
};
div.test{
    width: 220px;
    background-color: azure;
    padding: 20px;
    border: 1px solid gray;
    margin: 10; 
}



</style>